define(["@jupyter-widgets/base"],e=>(()=>{"use strict";var t={55:t=>{t.exports=e},91:(e,t,n)=>{n.r(t),n.d(t,{VERSION:()=>i,after:()=>Bt,all:()=>en,allKeys:()=>_e,any:()=>tn,assign:()=>Be,before:()=>Tt,bind:()=>jt,bindAll:()=>St,chain:()=>gt,chunk:()=>Ln,clone:()=>Le,collect:()=>Ht,compact:()=>Mn,compose:()=>Rt,constant:()=>G,contains:()=>nn,countBy:()=>yn,create:()=>De,debounce:()=>Nt,default:()=>qn,defaults:()=>Te,defer:()=>kt,delay:()=>Mt,detect:()=>Kt,difference:()=>An,drop:()=>Sn,each:()=>Ut,escape:()=>ut,every:()=>en,extend:()=>Re,extendOwn:()=>Be,filter:()=>Gt,find:()=>Kt,findIndex:()=>Yt,findKey:()=>Dt,findLastIndex:()=>Vt,findWhere:()=>Ct,first:()=>xn,flatten:()=>kn,foldl:()=>Jt,foldr:()=>Zt,forEach:()=>Ut,functions:()=>Ie,get:()=>qe,groupBy:()=>vn,has:()=>Fe,head:()=>xn,identity:()=>Ke,include:()=>nn,includes:()=>nn,indexBy:()=>_n,indexOf:()=>qt,initial:()=>On,inject:()=>Jt,intersection:()=>Rn,invert:()=>Ne,invoke:()=>rn,isArguments:()=>$,isArray:()=>C,isArrayBuffer:()=>D,isBoolean:()=>k,isDataView:()=>K,isDate:()=>R,isElement:()=>A,isEmpty:()=>ce,isEqual:()=>ve,isError:()=>T,isFinite:()=>J,isFunction:()=>V,isMap:()=>xe,isMatch:()=>se,isNaN:()=>Z,isNull:()=>E,isNumber:()=>P,isObject:()=>S,isRegExp:()=>B,isSet:()=>Ee,isString:()=>I,isSymbol:()=>X,isTypedArray:()=>ie,isUndefined:()=>M,isWeakMap:()=>Se,isWeakSet:()=>Me,iteratee:()=>Je,keys:()=>ae,last:()=>En,lastIndexOf:()=>Ft,map:()=>Ht,mapObject:()=>Ge,matcher:()=>Ce,matches:()=>Ce,max:()=>an,memoize:()=>Et,methods:()=>Ie,min:()=>cn,mixin:()=>Vn,negate:()=>Pt,noop:()=>Qe,now:()=>rt,object:()=>Xn,omit:()=>jn,once:()=>Xt,pairs:()=>Ae,partial:()=>wt,partition:()=>gn,pick:()=>wn,pluck:()=>on,property:()=>Ue,propertyOf:()=>et,random:()=>nt,range:()=>Dn,reduce:()=>Jt,reduceRight:()=>Zt,reject:()=>Qt,rest:()=>Sn,restArguments:()=>x,result:()=>vt,sample:()=>fn,select:()=>Gt,shuffle:()=>pn,size:()=>mn,some:()=>tn,sortBy:()=>hn,sortedIndex:()=>Wt,tail:()=>Sn,take:()=>xn,tap:()=>Ye,template:()=>dt,templateSettings:()=>ct,throttle:()=>At,times:()=>tt,toArray:()=>ln,toPath:()=>Ve,transpose:()=>Bn,unescape:()=>at,union:()=>Pn,uniq:()=>In,unique:()=>In,uniqueId:()=>yt,unzip:()=>Bn,values:()=>ke,where:()=>un,without:()=>Nn,wrap:()=>It,zip:()=>Tn});var r={};n.r(r),n.d(r,{VERSION:()=>i,after:()=>Bt,all:()=>en,allKeys:()=>_e,any:()=>tn,assign:()=>Be,before:()=>Tt,bind:()=>jt,bindAll:()=>St,chain:()=>gt,chunk:()=>Ln,clone:()=>Le,collect:()=>Ht,compact:()=>Mn,compose:()=>Rt,constant:()=>G,contains:()=>nn,countBy:()=>yn,create:()=>De,debounce:()=>Nt,default:()=>Wn,defaults:()=>Te,defer:()=>kt,delay:()=>Mt,detect:()=>Kt,difference:()=>An,drop:()=>Sn,each:()=>Ut,escape:()=>ut,every:()=>en,extend:()=>Re,extendOwn:()=>Be,filter:()=>Gt,find:()=>Kt,findIndex:()=>Yt,findKey:()=>Dt,findLastIndex:()=>Vt,findWhere:()=>Ct,first:()=>xn,flatten:()=>kn,foldl:()=>Jt,foldr:()=>Zt,forEach:()=>Ut,functions:()=>Ie,get:()=>qe,groupBy:()=>vn,has:()=>Fe,head:()=>xn,identity:()=>Ke,include:()=>nn,includes:()=>nn,indexBy:()=>_n,indexOf:()=>qt,initial:()=>On,inject:()=>Jt,intersection:()=>Rn,invert:()=>Ne,invoke:()=>rn,isArguments:()=>$,isArray:()=>C,isArrayBuffer:()=>D,isBoolean:()=>k,isDataView:()=>K,isDate:()=>R,isElement:()=>A,isEmpty:()=>ce,isEqual:()=>ve,isError:()=>T,isFinite:()=>J,isFunction:()=>V,isMap:()=>xe,isMatch:()=>se,isNaN:()=>Z,isNull:()=>E,isNumber:()=>P,isObject:()=>S,isRegExp:()=>B,isSet:()=>Ee,isString:()=>I,isSymbol:()=>X,isTypedArray:()=>ie,isUndefined:()=>M,isWeakMap:()=>Se,isWeakSet:()=>Me,iteratee:()=>Je,keys:()=>ae,last:()=>En,lastIndexOf:()=>Ft,map:()=>Ht,mapObject:()=>Ge,matcher:()=>Ce,matches:()=>Ce,max:()=>an,memoize:()=>Et,methods:()=>Ie,min:()=>cn,mixin:()=>Vn,negate:()=>Pt,noop:()=>Qe,now:()=>rt,object:()=>Xn,omit:()=>jn,once:()=>Xt,pairs:()=>Ae,partial:()=>wt,partition:()=>gn,pick:()=>wn,pluck:()=>on,property:()=>Ue,propertyOf:()=>et,random:()=>nt,range:()=>Dn,reduce:()=>Jt,reduceRight:()=>Zt,reject:()=>Qt,rest:()=>Sn,restArguments:()=>x,result:()=>vt,sample:()=>fn,select:()=>Gt,shuffle:()=>pn,size:()=>mn,some:()=>tn,sortBy:()=>hn,sortedIndex:()=>Wt,tail:()=>Sn,take:()=>xn,tap:()=>Ye,template:()=>dt,templateSettings:()=>ct,throttle:()=>At,times:()=>tt,toArray:()=>ln,toPath:()=>Ve,transpose:()=>Bn,unescape:()=>at,union:()=>Pn,uniq:()=>In,unique:()=>In,uniqueId:()=>yt,unzip:()=>Bn,values:()=>ke,where:()=>un,without:()=>Nn,wrap:()=>It,zip:()=>Tn});var i="1.13.7",o="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},u=Array.prototype,a=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,s=u.push,l=u.slice,f=a.toString,p=a.hasOwnProperty,h="undefined"!=typeof ArrayBuffer,d="undefined"!=typeof DataView,v=Array.isArray,_=Object.keys,y=Object.create,g=h&&ArrayBuffer.isView,m=isNaN,b=isFinite,w=!{toString:null}.propertyIsEnumerable("toString"),j=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],O=Math.pow(2,53)-1;function x(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}}function S(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function E(e){return null===e}function M(e){return void 0===e}function k(e){return!0===e||!1===e||"[object Boolean]"===f.call(e)}function A(e){return!(!e||1!==e.nodeType)}function N(e){var t="[object "+e+"]";return function(e){return f.call(e)===t}}const I=N("String"),P=N("Number"),R=N("Date"),B=N("RegExp"),T=N("Error"),X=N("Symbol"),D=N("ArrayBuffer");var L=N("Function"),Y=o.document&&o.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof Y&&(L=function(e){return"function"==typeof e||!1});const V=L,W=N("Object");var z=d&&(!/\[native code\]/.test(String(DataView))||W(new DataView(new ArrayBuffer(8)))),q="undefined"!=typeof Map&&W(new Map),F=N("DataView");const K=z?function(e){return null!=e&&V(e.getInt8)&&D(e.buffer)}:F,C=v||N("Array");function U(e,t){return null!=e&&p.call(e,t)}var H=N("Arguments");!function(){H(arguments)||(H=function(e){return U(e,"callee")})}();const $=H;function J(e){return!X(e)&&b(e)&&!isNaN(parseFloat(e))}function Z(e){return P(e)&&m(e)}function G(e){return function(){return e}}function Q(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=O}}function ee(e){return function(t){return null==t?void 0:t[e]}}const te=ee("byteLength"),ne=Q(te);var re=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const ie=h?function(e){return g?g(e)&&!K(e):ne(e)&&re.test(f.call(e))}:G(!1),oe=ee("length");function ue(e,t){t=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(e){return!0===t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=j.length,r=e.constructor,i=V(r)&&r.prototype||a,o="constructor";for(U(e,o)&&!t.contains(o)&&t.push(o);n--;)(o=j[n])in e&&e[o]!==i[o]&&!t.contains(o)&&t.push(o)}function ae(e){if(!S(e))return[];if(_)return _(e);var t=[];for(var n in e)U(e,n)&&t.push(n);return w&&ue(e,t),t}function ce(e){if(null==e)return!0;var t=oe(e);return"number"==typeof t&&(C(e)||I(e)||$(e))?0===t:0===oe(ae(e))}function se(e,t){var n=ae(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var u=n[o];if(t[u]!==i[u]||!(u in i))return!1}return!0}function le(e){return e instanceof le?e:this instanceof le?void(this._wrapped=e):new le(e)}function fe(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,te(e))}le.VERSION=i,le.prototype.value=function(){return this._wrapped},le.prototype.valueOf=le.prototype.toJSON=le.prototype.value,le.prototype.toString=function(){return String(this._wrapped)};var pe="[object DataView]";function he(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&de(e,t,n,r)}function de(e,t,n,r){e instanceof le&&(e=e._wrapped),t instanceof le&&(t=t._wrapped);var i=f.call(e);if(i!==f.call(t))return!1;if(z&&"[object Object]"==i&&K(e)){if(!K(t))return!1;i=pe}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0===+e?1/+e==1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return c.valueOf.call(e)===c.valueOf.call(t);case"[object ArrayBuffer]":case pe:return de(fe(e),fe(t),n,r)}var o="[object Array]"===i;if(!o&&ie(e)){if(te(e)!==te(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var u=e.constructor,a=t.constructor;if(u!==a&&!(V(u)&&u instanceof u&&V(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];for(var s=(n=n||[]).length;s--;)if(n[s]===e)return r[s]===t;if(n.push(e),r.push(t),o){if((s=e.length)!==t.length)return!1;for(;s--;)if(!he(e[s],t[s],n,r))return!1}else{var l,p=ae(e);if(s=p.length,ae(t).length!==s)return!1;for(;s--;)if(!U(t,l=p[s])||!he(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0}function ve(e,t){return he(e,t)}function _e(e){if(!S(e))return[];var t=[];for(var n in e)t.push(n);return w&&ue(e,t),t}function ye(e){var t=oe(e);return function(n){if(null==n)return!1;var r=_e(n);if(oe(r))return!1;for(var i=0;i<t;i++)if(!V(n[e[i]]))return!1;return e!==je||!V(n[ge])}}var ge="forEach",me=["clear","delete"],be=["get","has","set"],we=me.concat(ge,be),je=me.concat(be),Oe=["add"].concat(me,ge,"has");const xe=q?ye(we):N("Map"),Se=q?ye(je):N("WeakMap"),Ee=q?ye(Oe):N("Set"),Me=N("WeakSet");function ke(e){for(var t=ae(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r}function Ae(e){for(var t=ae(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r}function Ne(e){for(var t={},n=ae(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t}function Ie(e){var t=[];for(var n in e)V(e[n])&&t.push(n);return t.sort()}function Pe(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],u=e(o),a=u.length,c=0;c<a;c++){var s=u[c];t&&void 0!==n[s]||(n[s]=o[s])}return n}}const Re=Pe(_e),Be=Pe(ae),Te=Pe(_e,!0);function Xe(e){if(!S(e))return{};if(y)return y(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}function De(e,t){var n=Xe(e);return t&&Be(n,t),n}function Le(e){return S(e)?C(e)?e.slice():Re({},e):e}function Ye(e,t){return t(e),e}function Ve(e){return C(e)?e:[e]}function We(e){return le.toPath(e)}function ze(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}function qe(e,t,n){var r=ze(e,We(t));return M(r)?n:r}function Fe(e,t){for(var n=(t=We(t)).length,r=0;r<n;r++){var i=t[r];if(!U(e,i))return!1;e=e[i]}return!!n}function Ke(e){return e}function Ce(e){return e=Be({},e),function(t){return se(t,e)}}function Ue(e){return e=We(e),function(t){return ze(t,e)}}function He(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}}function $e(e,t,n){return null==e?Ke:V(e)?He(e,t,n):S(e)&&!C(e)?Ce(e):Ue(e)}function Je(e,t){return $e(e,t,1/0)}function Ze(e,t,n){return le.iteratee!==Je?le.iteratee(e,t):$e(e,t,n)}function Ge(e,t,n){t=Ze(t,n);for(var r=ae(e),i=r.length,o={},u=0;u<i;u++){var a=r[u];o[a]=t(e[a],a,e)}return o}function Qe(){}function et(e){return null==e?Qe:function(t){return qe(e,t)}}function tt(e,t,n){var r=Array(Math.max(0,e));t=He(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r}function nt(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}le.toPath=Ve,le.iteratee=Je;const rt=Date.now||function(){return(new Date).getTime()};function it(e){var t=function(t){return e[t]},n="(?:"+ae(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}}const ot={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ut=it(ot),at=it(Ne(ot)),ct=le.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var st=/(.)^/,lt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ft=/\\|'|\r|\n|\u2028|\u2029/g;function pt(e){return"\\"+lt[e]}var ht=/^\s*(\w|\$)+\s*$/;function dt(e,t,n){!t&&n&&(t=n),t=Te({},t,le.templateSettings);var r=RegExp([(t.escape||st).source,(t.interpolate||st).source,(t.evaluate||st).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,u,a){return o+=e.slice(i,a).replace(ft,pt),i=a+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":u&&(o+="';\n"+u+"\n__p+='"),t}),o+="';\n";var u,a=t.variable;if(a){if(!ht.test(a))throw new Error("variable is not a bare identifier: "+a)}else o="with(obj||{}){\n"+o+"}\n",a="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{u=new Function(a,"_",o)}catch(e){throw e.source=o,e}var c=function(e){return u.call(this,e,le)};return c.source="function("+a+"){\n"+o+"}",c}function vt(e,t,n){var r=(t=We(t)).length;if(!r)return V(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=V(o)?o.call(e):o}return e}var _t=0;function yt(e){var t=++_t+"";return e?e+t:t}function gt(e){var t=le(e);return t._chain=!0,t}function mt(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=Xe(e.prototype),u=e.apply(o,i);return S(u)?u:o}var bt=x(function(e,t){var n=bt.placeholder,r=function(){for(var i=0,o=t.length,u=Array(o),a=0;a<o;a++)u[a]=t[a]===n?arguments[i++]:t[a];for(;i<arguments.length;)u.push(arguments[i++]);return mt(e,r,this,this,u)};return r});bt.placeholder=le;const wt=bt,jt=x(function(e,t,n){if(!V(e))throw new TypeError("Bind must be called on a function");var r=x(function(i){return mt(e,r,t,this,n.concat(i))});return r}),Ot=Q(oe);function xt(e,t,n,r){if(r=r||[],t||0===t){if(t<=0)return r.concat(e)}else t=1/0;for(var i=r.length,o=0,u=oe(e);o<u;o++){var a=e[o];if(Ot(a)&&(C(a)||$(a)))if(t>1)xt(a,t-1,n,r),i=r.length;else for(var c=0,s=a.length;c<s;)r[i++]=a[c++];else n||(r[i++]=a)}return r}const St=x(function(e,t){var n=(t=xt(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=jt(e[r],e)}return e});function Et(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return U(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n}const Mt=x(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),kt=wt(Mt,le,1);function At(e,t,n){var r,i,o,u,a=0;n||(n={});var c=function(){a=!1===n.leading?0:rt(),r=null,u=e.apply(i,o),r||(i=o=null)},s=function(){var s=rt();a||!1!==n.leading||(a=s);var l=t-(s-a);return i=this,o=arguments,l<=0||l>t?(r&&(clearTimeout(r),r=null),a=s,u=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(c,l)),u};return s.cancel=function(){clearTimeout(r),a=0,r=i=o=null},s}function Nt(e,t,n){var r,i,o,u,a,c=function(){var s=rt()-i;t>s?r=setTimeout(c,t-s):(r=null,n||(u=e.apply(a,o)),r||(o=a=null))},s=x(function(s){return a=this,o=s,i=rt(),r||(r=setTimeout(c,t),n&&(u=e.apply(a,o))),u});return s.cancel=function(){clearTimeout(r),r=o=a=null},s}function It(e,t){return wt(t,e)}function Pt(e){return function(){return!e.apply(this,arguments)}}function Rt(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function Bt(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Tt(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}const Xt=wt(Tt,2);function Dt(e,t,n){t=Ze(t,n);for(var r,i=ae(e),o=0,u=i.length;o<u;o++)if(t(e[r=i[o]],r,e))return r}function Lt(e){return function(t,n,r){n=Ze(n,r);for(var i=oe(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}const Yt=Lt(1),Vt=Lt(-1);function Wt(e,t,n,r){for(var i=(n=Ze(n,r,1))(t),o=0,u=oe(e);o<u;){var a=Math.floor((o+u)/2);n(e[a])<i?o=a+1:u=a}return o}function zt(e,t,n){return function(r,i,o){var u=0,a=oe(r);if("number"==typeof o)e>0?u=o>=0?o:Math.max(o+a,u):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=t(l.call(r,u,a),Z))>=0?o+u:-1;for(o=e>0?u:a-1;o>=0&&o<a;o+=e)if(r[o]===i)return o;return-1}}const qt=zt(1,Yt,Wt),Ft=zt(-1,Vt);function Kt(e,t,n){var r=(Ot(e)?Yt:Dt)(e,t,n);if(void 0!==r&&-1!==r)return e[r]}function Ct(e,t){return Kt(e,Ce(t))}function Ut(e,t,n){var r,i;if(t=He(t,n),Ot(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=ae(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e}function Ht(e,t,n){t=Ze(t,n);for(var r=!Ot(e)&&ae(e),i=(r||e).length,o=Array(i),u=0;u<i;u++){var a=r?r[u]:u;o[u]=t(e[a],a,e)}return o}function $t(e){return function(t,n,r,i){var o=arguments.length>=3;return function(t,n,r,i){var o=!Ot(t)&&ae(t),u=(o||t).length,a=e>0?0:u-1;for(i||(r=t[o?o[a]:a],a+=e);a>=0&&a<u;a+=e){var c=o?o[a]:a;r=n(r,t[c],c,t)}return r}(t,He(n,i,4),r,o)}}const Jt=$t(1),Zt=$t(-1);function Gt(e,t,n){var r=[];return t=Ze(t,n),Ut(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function Qt(e,t,n){return Gt(e,Pt(Ze(t)),n)}function en(e,t,n){t=Ze(t,n);for(var r=!Ot(e)&&ae(e),i=(r||e).length,o=0;o<i;o++){var u=r?r[o]:o;if(!t(e[u],u,e))return!1}return!0}function tn(e,t,n){t=Ze(t,n);for(var r=!Ot(e)&&ae(e),i=(r||e).length,o=0;o<i;o++){var u=r?r[o]:o;if(t(e[u],u,e))return!0}return!1}function nn(e,t,n,r){return Ot(e)||(e=ke(e)),("number"!=typeof n||r)&&(n=0),qt(e,t,n)>=0}const rn=x(function(e,t,n){var r,i;return V(t)?i=t:(t=We(t),r=t.slice(0,-1),t=t[t.length-1]),Ht(e,function(e){var o=i;if(!o){if(r&&r.length&&(e=ze(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)})});function on(e,t){return Ht(e,Ue(t))}function un(e,t){return Gt(e,Ce(t))}function an(e,t,n){var r,i,o=-1/0,u=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=Ot(e)?e:ke(e)).length;a<c;a++)null!=(r=e[a])&&r>o&&(o=r);else t=Ze(t,n),Ut(e,function(e,n,r){((i=t(e,n,r))>u||i===-1/0&&o===-1/0)&&(o=e,u=i)});return o}function cn(e,t,n){var r,i,o=1/0,u=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=Ot(e)?e:ke(e)).length;a<c;a++)null!=(r=e[a])&&r<o&&(o=r);else t=Ze(t,n),Ut(e,function(e,n,r){((i=t(e,n,r))<u||i===1/0&&o===1/0)&&(o=e,u=i)});return o}var sn=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ln(e){return e?C(e)?l.call(e):I(e)?e.match(sn):Ot(e)?Ht(e,Ke):ke(e):[]}function fn(e,t,n){if(null==t||n)return Ot(e)||(e=ke(e)),e[nt(e.length-1)];var r=ln(e),i=oe(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,u=0;u<t;u++){var a=nt(u,o),c=r[u];r[u]=r[a],r[a]=c}return r.slice(0,t)}function pn(e){return fn(e,1/0)}function hn(e,t,n){var r=0;return t=Ze(t,n),on(Ht(e,function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")}function dn(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=Ze(r,i),Ut(n,function(t,i){var u=r(t,i,n);e(o,t,u)}),o}}const vn=dn(function(e,t,n){U(e,n)?e[n].push(t):e[n]=[t]}),_n=dn(function(e,t,n){e[n]=t}),yn=dn(function(e,t,n){U(e,n)?e[n]++:e[n]=1}),gn=dn(function(e,t,n){e[n?0:1].push(t)},!0);function mn(e){return null==e?0:Ot(e)?e.length:ae(e).length}function bn(e,t,n){return t in n}const wn=x(function(e,t){var n={},r=t[0];if(null==e)return n;V(r)?(t.length>1&&(r=He(r,t[1])),t=_e(e)):(r=bn,t=xt(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var u=t[i],a=e[u];r(a,u,e)&&(n[u]=a)}return n}),jn=x(function(e,t){var n,r=t[0];return V(r)?(r=Pt(r),t.length>1&&(n=t[1])):(t=Ht(xt(t,!1,!1),String),r=function(e,n){return!nn(t,n)}),wn(e,r,n)});function On(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function xn(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:On(e,e.length-t)}function Sn(e,t,n){return l.call(e,null==t||n?1:t)}function En(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:Sn(e,Math.max(0,e.length-t))}function Mn(e){return Gt(e,Boolean)}function kn(e,t){return xt(e,t,!1)}const An=x(function(e,t){return t=xt(t,!0,!0),Gt(e,function(e){return!nn(t,e)})}),Nn=x(function(e,t){return An(e,t)});function In(e,t,n,r){k(t)||(r=n,n=t,t=!1),null!=n&&(n=Ze(n,r));for(var i=[],o=[],u=0,a=oe(e);u<a;u++){var c=e[u],s=n?n(c,u,e):c;t&&!n?(u&&o===s||i.push(c),o=s):n?nn(o,s)||(o.push(s),i.push(c)):nn(i,c)||i.push(c)}return i}const Pn=x(function(e){return In(xt(e,!0,!0))});function Rn(e){for(var t=[],n=arguments.length,r=0,i=oe(e);r<i;r++){var o=e[r];if(!nn(t,o)){var u;for(u=1;u<n&&nn(arguments[u],o);u++);u===n&&t.push(o)}}return t}function Bn(e){for(var t=e&&an(e,oe).length||0,n=Array(t),r=0;r<t;r++)n[r]=on(e,r);return n}const Tn=x(Bn);function Xn(e,t){for(var n={},r=0,i=oe(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}function Dn(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i}function Ln(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(l.call(e,r,r+=t));return n}function Yn(e,t){return e._chain?le(t).chain():t}function Vn(e){return Ut(Ie(e),function(t){var n=le[t]=e[t];le.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),Yn(this,n.apply(le,e))}}),le}Ut(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=u[e];le.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Yn(this,n)}}),Ut(["concat","join","slice"],function(e){var t=u[e];le.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Yn(this,e)}});const Wn=le;var zn=Vn(r);zn._=zn;const qn=zn},156:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(672),t),i(n(795),t)},265:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),window.__webpack_public_path__=document.querySelector("body").getAttribute("data-base-url")+"nbextensions/ipyevents",i(n(156),t)},672:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EXTENSION_SPEC_VERSION=void 0,t.EXTENSION_SPEC_VERSION="2.0.4"},795:function(e,t,n){var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),u=0;u<n.length;u++)"default"!==n[u]&&i(t,e,n[u]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.EventModel=void 0;const a=n(55),c=n(672),s=u(n(91));let l=["altKey","ctrlKey","metaKey","shiftKey","type","timeStamp"],f=["clientX","clientY","pageX","pageY","screenX","screenY"],p=["dataX","dataY","relativeX","relativeY","boundingRectWidth","boundingRectHeight","boundingRectTop","boundingRectLeft","boundingRectBottom","boundingRectRight","arrayX","arrayY"],h=["button","buttons","layerX","layerY","movementX","movementY","offsetX","offsetY","x","y"],d=["deltaX","deltaY","deltaZ","deltaMode"],v=["changedTouches","targetTouches","touches"],_=["identifier"],y=["dataTransfer"],g=["code","key","location","repeat"],m=["tagName","id","className"],b={};class w extends a.WidgetModel{defaults(){return s.extend(super.defaults(),{_model_name:"EventModel",_model_module:"ipyevents",_model_module_version:c.EXTENSION_SPEC_VERSION,source:null,watched_events:[],ignore_modifier_key_events:!1,prevent_default_action:!1,xy_coordinate_system:null,xy:[],wait:0,throttle_or_debounce:null,_supported_mouse_events:[],_supported_key_events:[],_supported_touch_events:[],_modifier_keys:["Shift","Control","Alt","Meta"]})}initialize(e,t){super.initialize(e,t),this.on("change:source",this.prepare_source,this),this.on("change:watched_events",this.update_listeners,this),this.on("change:xy_coordinate_system",this.update_listeners,this),this.on("change:wait",this.update_listeners,this),this.on("change:throttle_or_debounce",this.update_listeners,this),this.prepare_source()}key_mouse_or_touch(e){return s.contains(this.get("_supported_mouse_events"),e)?"mouse":s.contains(this.get("_supported_key_events"),e)?"keyboard":s.contains(this.get("_supported_touch_events"),e)?"touch":void 0}_cache_listeners(e,t,n){b[this.model_id]||(b[this.model_id]=[]),b[this.model_id].push({event:e,view:t,func:n})}prepare_source(){let e=this.previous("source");this.stopListening(e);let t=this.get("source");"DOMWidgetModel"!=t.name&&("number"!=typeof t.get("_view_count")&&t.set("_view_count",0),this.listenTo(t,"change:_view_count",this.update_listeners),this.update_listeners())}update_listeners(){this.remove_listeners(),this.attach_listeners()}remove_listeners(){if(b[this.model_id])for(let e of b[this.model_id])e.view.el.removeEventListener(e.event,e.func);b[this.model_id]=null,this.get("xy").length>0&&(this.set("xy",[]),this.save_changes())}_add_listeners_to_view(e){for(let t of this.get("watched_events"))switch(this.key_mouse_or_touch(t)){case"keyboard":this._add_key_listener(t,e);break;case"touch":case"mouse":let n=this._throttle_or_debounce(this._dom_click.bind(this,e)),r=this._prevent_event_propagation.bind(this,e);e.el.addEventListener(t,n),e.el.addEventListener(t,r),this._cache_listeners(t,e,n),this._cache_listeners(t,e,r);break;default:console.error("Not familiar with that message source")}if(this.get("xy_coordinate_system")){let t=this._throttle_or_debounce(this._set_xy.bind(this,e)),n=this._prevent_event_propagation.bind(this,e),r="mousemove";e.el.addEventListener(r,t),e.el.addEventListener(r,n),this._cache_listeners(r,e,t),this._cache_listeners(r,e,n)}}attach_listeners(){let e=this.get("source");s.each(e.views,e=>{Promise.resolve(e).then(e=>{this._add_listeners_to_view(e)})})}_add_key_listener(e,t){let n=e=>{this.get("ignore_modifier_key_events")&&s.contains(this.get("_modifier_keys"),e.key)||(this._send_dom_event(e),e.stopPropagation(),e.preventDefault())},r=!0,i="ipyevents-watched",o="-4242";n=this._throttle_or_debounce(n);let u=()=>{document.addEventListener(e,n,r),t.el.focus({preventScroll:!0}),t.el!=document.activeElement&&(t.el.setAttribute("tabindex",o),t.el.focus({preventScroll:!0})),t.el.classList.add(i)},a=()=>{document.removeEventListener(e,n,r),t.el.getAttribute("tabindex")==o&&t.el.removeAttribute("tabindex"),t.el.classList.remove(i),t.el.blur()};t.el.addEventListener("mouseenter",u),t.el.addEventListener("mouseleave",a),this._cache_listeners("mouseenter",t,u),this._cache_listeners("mouseleave",t,a)}_supplement_mouse_or_touch_positions(e,t){if("touch"==this.key_mouse_or_touch(t.type))for(let n of v)for(let r of t[n])this._supplement_mouse_positions(e,r);else this._supplement_mouse_positions(e,t)}_supplement_mouse_positions(e,t){let n=function(e,t){var n=e.el.getBoundingClientRect(),r=n.top,i=n.left;return{x:Math.round(t.clientX-i),y:Math.round(t.clientY-r)}}(e,t);if(t.relativeX=n.x,t.relativeY=n.y,"_data_xy"in e){let n=e._data_xy(t);t.dataX=n.x,t.dataY=n.y}else if("ImageView"==e.model.get("_view_name")){let n=function(e,t){var n=parseInt(e.el.style.paddingLeft)||0,r=parseInt(e.el.style.borderLeft)||0,i=parseInt(e.el.style.paddingTop)||0,o=parseInt(e.el.style.borderTop)||0,u=parseInt(t.relativeX)-r-n,a=parseInt(t.relativeY)-o-i;return{x:Math.round(u/e.el.width*e.el.naturalWidth),y:Math.round(a/e.el.height*e.el.naturalHeight)}}(e,t);t.dataX=n.x,t.dataY=n.y}var r=e.el.getBoundingClientRect();t.boundingRectWidth=r.width,t.boundingRectHeight=r.height,t.boundingRectTop=r.top,t.boundingRectLeft=r.left,t.boundingRectBottom=r.bottom,t.boundingRectRight=r.right,"dataX"in t&&(t.arrayX=t.dataX,t.arrayY=t.dataY)}_dom_click(e,t){this._supplement_mouse_or_touch_positions(e,t),this._send_dom_event(t)}_set_xy(e,t){this._supplement_mouse_or_touch_positions(e,t);let n=this.get("xy_coordinate_system"),r=[t[n+"X"],t[n+"Y"]];void 0!==r[0]?(this.set("xy",r),this.save_changes()):console.error("No coordinates of this type found: "+n)}_send_dom_event(e){let t={target:{}},n=[];switch(this.key_mouse_or_touch(e.type)){case"touch":n=l.concat(v);break;case"mouse":n=l.concat(h),n=n.concat(f),n=n.concat(p),"wheel"==e.type?n=n.concat(d):("drop"==e.type||e.type.startsWith("drag"))&&(n=n.concat(y));break;case"keyboard":n=l.concat(g);break;default:console.error("Not familiar with that message source")}for(let r of n)v.includes(r)?t[r]=this._populate_touch_event_list(e[r]):t[r]=e[r];for(let n of m)t.target[n]=e.target[n];t.event=e.type,this.send(t,{})}_populate_touch_event_list(e){let t={},n=[],r=_.concat(f);r=r.concat(p);for(let i of e){for(let e of r)t[e]=i[e];n=n.concat(t)}return n}_prevent_event_propagation(e,t){("wheel"==t.type||this.get("prevent_default_action"))&&(t.preventDefault(),t.stopPropagation())}_throttle_or_debounce(e){let t=this.get("wait"),n=this.get("throttle_or_debounce");return t>0?"debounce"==n?s.debounce(e,t):s.throttle(e,t):e}}t.EventModel=w,w.serializers=Object.assign(Object.assign({},a.WidgetModel.serializers),{source:{deserialize:a.unpack_models}})}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,r),o.exports}return r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(265)})());
//# sourceMappingURL=index.js.map